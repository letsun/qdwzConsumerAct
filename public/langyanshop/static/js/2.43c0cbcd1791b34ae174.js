webpackJsonp([2],{BO1k:function(t,e,s){t.exports={default:s("fxRn"),__esModule:!0}},GSpQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Gu7T"),a=s.n(i),o=s("GQaK"),r={props:{showSearchFilterList:{type:Boolean,defualt:!1},page:{type:String,default:"home"},shopLogo:{type:String,defualt:""}},data:function(){return{searchWord:"",searchFlag:!1}},computed:{companyId:function(){return this.$store.state.companyId}},beforeMount:function(){console.log("component searchControls.vue:beforeMount")},mounted:function(){var t=this;console.log("component searchControls.vue:mounted"),this.$nextTick(function(){console.log("component searchControls.vue:mounted nextTick"),t.searchWord=t.$route.query.searchWord})},methods:{showSearchFilter:function(){this.searchFlag=!0,this.$emit("showSearchFilterEvent",!0)},hideSearchFilter:function(){this.$emit("showSearchFilterEvent",!1)},searchProductList:function(){this.$emit("searchProductListEvent",this.searchWord)},searchProductToPage:function(){this.$emit("searchProductToPageEvent",this.searchWord)},backPage:function(){this.$store.commit("updateDirection","right"),this.$router.push({path:"/home"})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"search-wrapper"},[[s("i",{staticClass:"back iconfont icon-fanhui2",on:{click:t.backPage}}),t._v(" "),s("div",{ref:"searchCon",staticClass:"search-con search-con1"},[s("div",{staticClass:"search-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchWord,expression:"searchWord"}],ref:"searchText",staticClass:"search-text",attrs:{type:"text",placeholder:"请输入查询的商品名称"},domProps:{value:t.searchWord},on:{keyup:t.searchProductList,click:t.showSearchFilter,input:function(e){e.target.composing||(t.searchWord=e.target.value)}}})]),t._v(" "),s("a",{staticClass:"search-btn iconfont icon-sousuo",attrs:{href:"javascript: void(0);"},on:{click:t.searchProductToPage}})])]],2)])},staticRenderFns:[]};var n=s("VU/8")(r,c,!1,function(t){s("aRjt")},"data-v-0cc11307",null).exports,l=s("BO1k"),h=s.n(l),d=s("d1wj"),u=s("yt7g"),p=s("zSeF"),v={props:{showSearchFilterList:{type:Boolean,default:!0}},data:function(){return{goodsList:[],searchFilterList:[],scroll:{},pageNum:30,pageSize:1}},computed:{mallType:function(){return this.$store.state.mallType}},mounted:function(){var t=this;this.$nextTick(function(){t.initScroll()})},watch:{showSearchFilterList:function(){this.iniGoods()}},updated:function(){this.scroll.refresh()},methods:{initScroll:function(){this.scroll=new o.a(this.$refs.scrollWrapper,{scrollbar:{fade:!0},click:!0})},initGoodsList:function(){var t=this;this.$http.get(d.a.product.goodsList,{params:{mallType:this.mallType,pageNum:this.pageNum,pageSize:this.pageSize}}).then(function(e){var s=e.data;s.code===p.a.SUCCESS?t.goodsList=s.data.goodsList:u.a.checkStatus(t,s,{isComponent:!0},t.initGoodsList)})},iniGoods:function(){this.showSearchFilterList&&this.initGoodsList()},searchFilter:function(t){if(this.searchFilterList=[],t){var e=new RegExp(t,"i"),s=!0,i=!1,a=void 0;try{for(var o,r=h()(this.goodsList);!(s=(o=r.next()).done);s=!0){var c=o.value;e.test(c.goodsName)&&this.searchFilterList.push(c)}}catch(t){i=!0,a=t}finally{try{!s&&r.return&&r.return()}finally{if(i)throw a}}}},toProduct:function(t){this.$store.commit("updateDirection","left"),this.$router.push({path:"/productDetail",query:{goodsId:t}})},beforeEnter:function(t){t.style.opacity=0},enter:function(t,e){var s=10*t.dataset.index;setTimeout(function(){Velocity(t,{opacity:1},{complete:e})},s)},leave:function(t,e){var s=30*t.dataset.index;setTimeout(function(){Velocity(t,{opacity:0},{complete:e})},s)}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{name:"search"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSearchFilterList,expression:"showSearchFilterList"}],staticClass:"filter-wrapper"},[s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[s("transition-group",{staticClass:"filter-list",attrs:{name:"searchList",tag:"ul",css:!1},on:{"before-enter":t.beforeEnter,enter:t.enter,leave:t.leave}},t._l(t.searchFilterList,function(e,i){return s("li",{key:i,staticClass:"item",attrs:{"data-index":i},on:{click:function(s){t.toProduct(e.goodsId)}}},[s("div",{staticClass:"goods-img"},[s("img",{directives:[{name:"adaptiveSrc",rawName:"v-adaptiveSrc:li",value:e.imagesUrl,expression:"item.imagesUrl",arg:"li"}]})]),t._v(" "),s("div",{staticClass:"goods-right"},[s("div",{staticClass:"goods-name"},[t._v(t._s(e.goodsName))]),t._v(" "),s("div",{staticClass:"goods-bottom"},[s("div",{staticClass:"price"},[s("span",[t._v(t._s(e.goodsScore))]),t._v("元气值\n\t\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"stock"},[t._v("库存："+t._s(e.goodsStock))]),t._v(" "),s("div",{staticClass:"buy-btn"},[t._v("兑换")])])])])}))],1)])])],1)},staticRenderFns:[]};var g=s("VU/8")(v,f,!1,function(t){s("y3w2")},"data-v-48b40438",null).exports,m=s("y0Qy"),S=s("RoWd"),L=s("7AG+"),_=s("wzPG"),w=s("CyOZ"),F={components:{Search:n,noRecord:m.a,SearchFilterList:g,LoadingTip:S.a,ModelWin:_.a,LoadingPage:L.a},data:function(){return{searchWord:"",searchFilterList:[],scroll:{},showSearchFilterList:!1,pageNum:6,pageSize:1,hasNext:!0,loadingTip:"上滑加载更多",loading:!1,errorTip:"",showModel:!1,isConfirm:!1,okType:"",isLoadCompleted:!1}},mounted:function(){var t=this;this.$nextTick(function(){$("body").show(),Object(w.a)(t,t.getHeaders,"-1"),t.searchWord=t.$route.query.searchWord,t.initSearchFilterList(),t.initScroll(),u.a.commonFunc(t)})},computed:{mallType:function(){return this.$store.state.mallType}},updated:function(){this.finish()},methods:{initScroll:function(){var t=this;this.scroll=new o.a(this.$refs.scrollWrapper,{scrollbar:{fade:!0},click:!0,pullUpLoad:{threshold:0}}),this.scroll.on("pullingUp",function(){t.hasNext?(t.pageSize++,t.loadingTip="数据正在加载中....",t.loading=!0,t.initSearchFilterList()):t.loadingTip="已经没有更多了"})},initSearchFilterList:function(t){var e=this;this.searchWord?this.$http.get(d.a.product.search,{params:{mallType:this.mallType,searchWord:this.searchWord,pageNum:this.pageNum,pageSize:this.pageSize}}).then(function(s){var i=s.data;i.code===p.a.SUCCESS?(e.loadingTip="上滑加载更多",e.hasNext=i.data.hasNext,e.isLoadCompleted=!0,e.loading?e.searchFilterList=[].concat(a()(e.searchFilterList),a()(i.data.goodsList)):e.searchFilterList=i.data.goodsList):u.a.checkStatus(e,i,{},e.initSearchFilterList,t)}):(this.searchFilterList=[],this.isLoadCompleted=!0)},searchProductToPage:function(t){this.showSearchFilterList=!1,this.loading=!1,this.searchWord=t,this.pageSize=1,this.initSearchFilterList()},showSearchFilter:function(t){this.showSearchFilterList=t},searchProductList:function(t){this.$refs.searchFilterList.searchFilter(t)},toProduct:function(t){this.$emit("updateDirection","left"),this.$router.push({path:"/productDetail",query:{goodsId:t}})},closeModelWin:function(){this.isConfirm=!1,this.showModel=!1},okModelWin:function(t){t()},finish:function(){this.loading||this.scroll.scrollTo(0,0),this.scroll.refresh(),this.scroll.finishPullUp()},showError:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.showModel=!0,s&&(this.isConfirm=s,this.okType=e),this.errorTip=t}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("search",{attrs:{showSearchFilterList:t.showSearchFilterList,page:"search"},on:{showSearchFilterEvent:t.showSearchFilter,searchProductToPageEvent:t.searchProductToPage,searchProductListEvent:t.searchProductList}}),t._v(" "),s("search-filter-list",{ref:"searchFilterList",attrs:{showSearchFilterList:t.showSearchFilterList},on:{errorEvent:t.showError}}),t._v(" "),s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"search-wrapper"},[t.searchFilterList.length?[s("ul",{staticClass:"search-list"},t._l(t.searchFilterList,function(e,i){return s("li",{key:i,staticClass:"item",attrs:{"data-tagname":"li"},on:{click:function(s){t.toProduct(e.goodsId)}}},[s("div",{staticClass:"goods-img"},[s("img",{directives:[{name:"adaptiveSrc",rawName:"v-adaptiveSrc:li",value:e.imagesUrl,expression:"item.imagesUrl",arg:"li"}]})]),t._v(" "),s("div",{staticClass:"goods-right"},[s("div",{staticClass:"goods-name"},[t._v(t._s(e.goodsName))]),t._v(" "),s("div",{staticClass:"goods-bottom"},[s("div",{staticClass:"price"},[s("span",[t._v(t._s(e.goodsScore))]),t._v("元气值\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"stock"},[t._v("库存："+t._s(e.goodsStock))]),t._v(" "),s("div",{staticClass:"buy-btn"},[t._v("兑换")])])])])})),t._v(" "),s("loading-tip",{attrs:{loadingTip:t.loadingTip,isShow:t.searchFilterList.length>=t.pageNum,hasNext:t.hasNext}})]:t._e(),t._v(" "),t._e()],2)])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.isLoadCompleted?t._e():s("loading-page",{attrs:{page:"productDetail"}})],1),t._v(" "),s("model-win",{attrs:{show:t.showModel}},[s("template",{slot:"content"},[t._v("\n\t\t\t"+t._s(t.errorTip)+"\n\t\t")]),t._v(" "),s("template",{slot:"btn"},[t.isConfirm?[s("a",{staticClass:"btn",attrs:{href:"javascript:void(0);"},on:{click:t.closeModelWin}},[t._v("取消")]),t._v(" "),s("a",{staticClass:"btn btn-last",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.okModelWin(t.okType)}}},[t._v("确定")])]:[s("a",{staticClass:"btn",attrs:{href:"javascript:void(0);"},on:{click:t.closeModelWin}},[t._v("确定")])]],2)],2)],1)},staticRenderFns:[]};var y=s("VU/8")(F,C,!1,function(t){s("spyn")},"data-v-1d0df0b9",null);e.default=y.exports},aRjt:function(t,e){},fxRn:function(t,e,s){s("+tPU"),s("zQR9"),t.exports=s("g8Ux")},g8Ux:function(t,e,s){var i=s("77Pl"),a=s("3fs2");t.exports=s("FeBl").getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},spyn:function(t,e){},y3w2:function(t,e){}});