webpackJsonp([5],{"/pLu":function(t,s){},"1GWD":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("GQaK"),i=e("OUXH"),r=e("4LQZ"),d=e("wzPG"),o=e("y0Qy"),n=e("7AG+"),c=e("d1wj"),l=e("yt7g"),u=e("CyOZ"),h=e("zSeF"),v={components:{NavHeader:i.a,SubmitBtn:r.a,ModelWin:d.a,noRecord:o.a,LoadingPage:n.a},data:function(){return{addressList:[],query:{},errorTip:"",showModel:!1,isConfirm:!1,okType:"",addressId:"",isLoadCompleted:!0,imgPath:"https://qdwzvue-1254182596.cos.ap-guangzhou.myqcloud.com/qdwzAct/pafeite/"}},mounted:function(){var t=this;this.$nextTick(function(){$("body").show(),Object(u.a)(t,t.getHeaders,"-1"),t.$route.query.goodsId&&(t.query.goodsId=t.$route.query.goodsId),t.$route.query.chooseJsonProp&&(t.query.chooseJsonProp=t.$route.query.chooseJsonProp),t.$route.query.amount&&(t.query.amount=t.$route.query.amount),t.$route.query.addressType&&(t.query.addressType=t.$route.query.addressType),t.$route.query.redirectUrl&&(t.query.redirectUrl=t.$route.query.redirectUrl),t.initAddress(),t.initScroll()})},computed:{},methods:{initScroll:function(){new a.a(this.$refs.scrollWrapper,{scrollbar:{fade:!0},click:!0})},initAddress:function(){var t=this;this.$http.get(c.a.address.addressList).then(function(s){var e=s.data;if(e.code===h.a.SUCCESS){t.addressList=e.data,t.isLoadCompleted=!0;for(var a=0,i=t.addressList.length;a<i;a++)t.addressList[a].isDefault&&(t.addressId=t.addressList[a].id)}else l.a.checkStatus(t,e,{},t.initAddress)})},addAddress:function(){this.query.type="add",this.$router.push({path:"/editAddress",query:this.query})},editAddress:function(t){this.query.type="edit",this.query.addressId=t,console.log(this.query),this.$router.push({path:"/editAddress",query:this.query})},showDelAddressModel:function(t){this.addressId=t,this.showModel=!0,this.isConfirm=!0,this.okType=this.delAddress,this.errorTip="您确定要删除地址吗？"},closeModelWin:function(){this.isConfirm=!1,this.showModel=!1},okModelWin:function(t){t()},delAddress:function(){var t=this;this.$http.get(c.a.address.delAddress,{params:{receiveId:this.addressId}}).then(function(s){var e=s.data;e.code===h.a.SUCCESS?(t.isLoadCompleted=!0,t.initAddress(),t.showModel=!1):l.a.checkStatus(t,e,{},t.delAddress)})},setDefault:function(t){var s=this;this.addressId=t.id;for(var e=0,a=this.addressList.length;e<a;e++)this.addressId===this.addressList[e].id?this.addressList[e].isDefault=1:this.addressList[e].isDefault=0;this.$http.get(c.a.address.submitDefault,{params:{receiveId:this.addressId}}).then(function(e){var a=e.data;a.code===h.a.SUCCESS||l.a.checkStatus(s,a,{},s.setDefault,t)})},submitDefault:function(){var t=this;if(!this.addressId)return this.errorTip="请设置一个默认地址",this.showModel=!0,void(this.isConfirm=!1);this.$http.get(c.a.address.submitDefault,{params:{receiveId:this.addressId}}).then(function(s){var e=s.data;if(e.code===h.a.SUCCESS){l.a.getPath();t.$router.push({path:"/createOrder",query:t.query})}else l.a.checkStatus(t,e,{},t.submitDefault)})},toOrder:function(t){1==this.query.addressType&&(this.query.id=t,this.$router.push({path:"/createOrder",query:this.query}))}}},p={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("nav-header",{attrs:{back:"true"}},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("我的地址")])]),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"con"},[e("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[e("div",{staticClass:"wrapper"},[t.addressList.length?[e("ul",{staticClass:"address-list"},t._l(t.addressList,function(s,a){return e("li",{key:a,staticClass:"item",on:{click:function(e){t.toOrder(s.id)}}},[e("div",{staticClass:"address-top"},[e("div",{staticClass:"address-val"},[e("div",{staticClass:"address-val-top"},[e("span",{staticClass:"name"},[t._v(t._s(s.receiveName))]),t._v(" "),e("span",{staticClass:"tel"},[t._v(t._s(s.receivePhone))]),t._v(" "),1==s.isDefault?e("span",{staticClass:"default-text"},[t._v("默认")]):t._e()]),t._v(" "),e("div",{staticClass:"address-detail"},[t._v(t._s(s.receiveProvince)+t._s(s.receiveCity)+t._s(s.receiveArea)+t._s(s.receiveAddress))]),t._v(" "),e("div",{staticClass:"controls-wrapper"},[e("div",{staticClass:"controls-left",on:{click:function(e){e.stopPropagation(),t.setDefault(s)}}},[e("div",{staticClass:"default-address"},[1==s.isDefault?e("img",{staticClass:"icon",attrs:{src:t.imgPath+"14_1.png"}}):e("img",{staticClass:"icon",attrs:{src:t.imgPath+"14_2.png"}})]),t._v(" "),e("div",{staticClass:"default-text"},[t._v("设为默认")])]),t._v(" "),e("div",{staticClass:"controls-right"},[e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){e.stopPropagation(),t.showDelAddressModel(s.id)}}},[e("img",{attrs:{src:t.imgPath+"14_6.png",alt:""}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){e.stopPropagation(),t.editAddress(s.id)}}},[e("img",{attrs:{src:t.imgPath+"14_5.png",alt:""}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t编辑\n\t\t\t\t\t\t\t\t\t\t\t\t")])])])])])])}))]:[e("div",{staticClass:"no-record-wrapper"},[e("no-record",{attrs:{iconType:"noAddress",text:"您还没添加收货地址"}})],1)]],2)]),t._v(" "),e("div",{staticClass:"add-address",on:{click:t.addAddress}},[e("a",{attrs:{href:"javascript:void(0);"}},[t._v("添加新收货人")])]),t._v(" "),e("model-win",{attrs:{show:t.showModel}},[e("template",{slot:"content"},[t._v(t._s(t.errorTip))]),t._v(" "),e("template",{slot:"btn"},[t.isConfirm?[e("a",{staticClass:"btn",attrs:{href:"javascript:void(0);"},on:{click:t.closeModelWin}},[t._v("取消")]),t._v(" "),e("a",{staticClass:"btn btn-last",attrs:{href:"javascript:void(0);"},on:{click:function(s){t.okModelWin(t.okType)}}},[t._v("确定")])]:[e("a",{staticClass:"btn",attrs:{href:"javascript:void(0);"},on:{click:t.closeModelWin}},[t._v("确定")])]],2)],2)],1)]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.isLoadCompleted?t._e():e("loading-page")],1)],1)},staticRenderFns:[]};var f=e("VU/8")(v,p,!1,function(t){e("uA9p")},"data-v-9c90bc70",null);s.default=f.exports},"4LQZ":function(t,s,e){"use strict";var a={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("a",{staticClass:"submit-btn",attrs:{href:"javascript:void(0);"},on:{click:this.emitEvent}},[this._t("default")],2)])},staticRenderFns:[]};var i=e("VU/8")({methods:{emitEvent:function(){this.$emit("clickEvent")}}},a,!1,function(t){e("/pLu")},"data-v-515f7822",null);s.a=i.exports},uA9p:function(t,s){}});