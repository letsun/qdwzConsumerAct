webpackJsonp([3],{"+0yE":function(t,e,s){t.exports=s.p+"static/img/19_3.227b01d.png"},"ByN+":function(t,e,s){t.exports=s.p+"static/img/19_1.f22d27d.png"},aeSB:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("OUXH"),i=s("wzPG"),n=s("d1wj"),o=(s("yt7g"),s("CyOZ")),r=s("zSeF"),c=(s("GQaK"),{components:{NavHeader:a.a,ModelWin:i.a},data:function(){return{imgPath:"https://qdwzvue-1254182596.cos.ap-guangzhou.myqcloud.com/qdwzAct/pafeite/",rulesmask:!1,postermask:!1,posterinfo:"",canvasBg:"./19_1.png"}},mounted:function(){var t=this;this.$nextTick(function(){Object(o.a)(t,t.getHeaders,"-1"),t.poster()})},computed:{getHeaders:function(){return this.$store.getters.getHeaders}},updated:function(){},methods:{openrules:function(){this.rulesmask=!0},rulescolse:function(){this.rulesmask=!1},poster:function(){var t=this;this.$http.get(n.a.users.poster,{headers:this.getHeaders}).then(function(e){var s=e.data;if(s.code===r.a.SUCCESS){var a=s.data;a.mobile=t.formatter(a.mobile),t.posterinfo=a,t.qrcode()}})},opendposter:function(){var t=this;this.postermask=!0,setTimeout(function(){t.canvas()},300)},canvas:function(){var t=document.getElementById("poster-float"),e=t.offsetWidth,s=t.offsetHeight,a=document.createElement("canvas");a.width=2*e,a.height=2*s,a.getContext("2d").scale(2,2),html2canvas(t,{scale:2,canvas:a,width:e,height:s,useCORS:!0}).then(function(t){var e=t.getContext("2d");e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1;var s=document.createElement("img");s.src=t.toDataURL(),s.className="canvas abs",$("#poster-float").append(s),$(".canvas").css({position:"absolute",left:"0",top:"0","z-index":"99999",display:"block",width:"100%",height:"100%","-webkit-touch-callout":"none"})})},qrcode:function(){console.log(n.a.ip+"/shop/score/index/"+this.getHeaders.cpi+"?parentOpenid="+this.getHeaders.oi),$("#qrcode").qrcode({render:"canvas",text:n.a.ip+"/shop/score/index/"+this.getHeaders.cpi+"?parentOpenid="+this.getHeaders.oi,width:"150",height:"150",background:"#ffffff",foreground:"#000000"});var t=document.getElementsByTagName("canvas")[0],e=this.canvasToImage(t);$(".poster-qrcode").html(e)},canvasToImage:function(t){var e=new Image;return e.src=t.toDataURL("image/png"),e},posterClose:function(){$(".canvas").remove(),this.postermask=!1},InvitationRecord:function(){this.$router.push({path:"/InvitationRecord"})},formatter:function(t){var e=t.length,s=t.substring(3,e-4);return t.replace(s,"****")},getBase64:function(t){var e=this,s=new Image;s.crossOrigin="",s.src=t;var a=$.Deferred();if(t)return s.onload=function(){a.resolve(e.getBase64Image(s))},a.promise()},getBase64Image:function(t,e,s){var a=document.createElement("canvas");return a.width=e||t.width,a.height=s||t.height,a.getContext("2d").drawImage(t,0,0,a.width,a.height),a.toDataURL()}}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-header",{attrs:{back:"true",color:"1"}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("邀请好友")])]),t._v(" "),a("div",{staticClass:"container"},[a("img",{staticClass:"bg",attrs:{src:t.imgPath+"13_4.png",alt:""}}),t._v(" "),a("img",{staticClass:"rules",attrs:{src:t.imgPath+"13_1.png"},on:{click:t.openrules}}),t._v(" "),a("div",{staticClass:"footer"},[a("div",{staticClass:"footer-item",on:{click:t.InvitationRecord}},[a("img",{attrs:{src:t.imgPath+"13_2.png"}})]),t._v(" "),a("div",{staticClass:"footer-item",on:{click:t.opendposter}},[a("img",{attrs:{src:t.imgPath+"13_3.png"}})])]),t._v(" "),a("div",{staticStyle:{display:"none"},attrs:{id:"qrcode"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.rulesmask,expression:"rulesmask"}],staticClass:"rulesmask",class:{showWin:t.rulesmask,hideWin:!t.rulesmask},on:{click:t.rulescolse}},[t._m(0)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.postermask,expression:"postermask"}],staticClass:"poster",on:{click:t.posterClose}},[a("div",{staticClass:"poster-float"},[a("div",{staticClass:"poster-title"},[t._v("长按图片保存到相册")]),t._v(" "),a("div",{staticClass:"poster-con",attrs:{id:"poster-float"}},[a("img",{staticClass:"poster-bg",attrs:{src:s("ByN+")}}),t._v(" "),a("div",{staticClass:"poster-footer"},[a("div",{staticClass:"poster-infor"},[a("div",{},[t._v(t._s(t.posterinfo.nickname))]),t._v(" "),a("div",{},[t._v("邀请您加入AN")]),t._v(" "),a("div",{},[t._v("长按识别二维码 注册即送新人专享礼")])]),t._v(" "),t._m(1)])])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rulesmask-con"},[s("div",{staticClass:"rulesmask-title"},[t._v("\n\t\t\t\t\t活动规则\n\t\t\t\t\t"),s("span")]),t._v(" "),s("div",{staticClass:"rulesmask-content"},[s("div",{staticClass:"rulesmask-list"},[s("div",{staticClass:"rulesmask-garden"},[t._v("1、")]),t._v(" "),s("div",{staticClass:"rulesmask-text"},[t._v("邀请朋友注册成为会员，您即可获得45积分，邀请上限人数10人。")])]),t._v(" "),s("div",{staticClass:"rulesmask-list"},[s("div",{staticClass:"rulesmask-garden"},[t._v("2、")]),t._v(" "),s("div",{staticClass:"rulesmask-text"},[t._v("该活动最终解释权归深圳市狼烟天下科技有限公司所有。")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"poster-qrcode"},[e("img",{attrs:{src:s("+0yE")}})])}]};var d=s("VU/8")(c,l,!1,function(t){s("h/z4")},"data-v-6b2ce5ca",null);e.default=d.exports},"h/z4":function(t,e){}});