webpackJsonp([7],{"5nL+":function(t,e){},"8XJ4":function(t,e){},LpXm:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("GQaK"),i=o("OUXH"),s=o("rl/I"),n=o("d1wj"),r=o("yt7g"),d=o("zSeF"),c={data:function(){return{categoryList:[],currentIndex:"all"}},computed:{},mounted:function(){var t=this;this.$nextTick(function(){t.initCategory(),t.initScroll()})},methods:{initScroll:function(){new a.a(this.$refs.menuWrapper,{click:!0})},initCategory:function(){var t=this;this.$http.get(n.a.product.categoryType).then(function(e){var o=e.data;o.code===d.a.SUCCESS?t.categoryList=o.data:r.a.checkStatus(t,o,{isComponent:!0},t.initCategory)})},selectCategory:function(t,e,o){this.currentIndex=t,this.$emit("sendCategoryIdEvent",e,o)}}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[o("ul",[o("li",{staticClass:"menu-item"},[o("a",{staticClass:"menu-item-link",class:{active:"all"===t.currentIndex},attrs:{href:"javascript:void(0);"},on:{click:function(e){t.selectCategory("all","","menu")}}},[t._v("全部")])]),t._v(" "),t._l(t.categoryList,function(e,a){return o("li",{key:a,staticClass:"menu-item"},[o("a",{staticClass:"menu-item-link",class:{active:t.currentIndex===a},attrs:{href:"javascript:void(0);"},on:{click:function(o){t.selectCategory(a,e.categoryId,"menu")}}},[t._v(t._s(e.categoryName))])])})],2)]),t._v(".\n")])},staticRenderFns:[]};var p=o("VU/8")(c,l,!1,function(t){o("ZZR5")},"data-v-4e91c17e",null).exports,u=o("Gu7T"),g=o.n(u),m=o("y0Qy"),v=o("RoWd"),h=o("7AG+"),f={data:function(){return{categoryId:"",goodsList:[],scroll:null,pageNum:10,pageSize:1,hasNext:!0,loadingTip:"上滑加载更多"}},props:{isLoadCompleted:{type:Boolean,default:!0},isLoadPageCompleted:{type:Boolean,default:!1}},components:{noRecord:m.a,LoadingTip:v.a,LoadingPage:h.a},computed:{mallType:function(){return this.$store.state.mallType},containerId:function(){return this.$store.state.containerId}},mounted:function(){var t=this;this.$nextTick(function(){t.initProductListById(),t.initScroll()})},updated:function(){this.finish()},methods:{initScroll:function(){var t=this;this.scroll=new a.a(this.$refs.goodsWrapper,{scrollbar:{fade:!0},click:!0,pullUpLoad:{threshold:100}}),this.scroll.on("pullingUp",function(){t.hasNext?(t.pageSize++,t.loadingTip="数据正在加载中....",t.initProductListById()):t.loadingTip="已经没有更多了"})},initProductListById:function(t){var e=this;this.$http.get(n.a.product.goodsList,{params:{categoryId:this.categoryId,mallType:this.mallType,pageNum:this.pageNum,pageSize:this.pageSize}}).then(function(o){var a=o.data;a.code===d.a.SUCCESS?(e.loadingTip="上滑加载更多",e.hasNext=a.data.hasNext,e.isLoadPageCompleted&&e.$emit("updateLoadCompletedEvent",!0),e.isLoadPageCompleted||e.$emit("updatePageLoadCompleteEvent",!0),e.goodsList=void 0===t?[].concat(g()(e.goodsList),g()(a.data.goodsList)):a.data.goodsList):r.a.checkStatus(e,a,{isComponent:!0},e.initProductListById,t)})},sendCategoryIdToCategoryList:function(t,e){this.pageSize=1,this.categoryId=void 0!==t?t:"",this.initProductListById(e),this.scroll.scrollTo(0,0)},finish:function(){this.scroll.finishPullUp(),this.scroll.refresh()},toProductDetail:function(t){this.$store.commit("updateDirection","left"),this.$router.push({path:"/productDetail",query:{goodsId:t}})}}},C={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{ref:"goodsWrapper",staticClass:"goods-wrapper"},[o("div",[o("transition",{attrs:{name:"fade"}},[t.isLoadCompleted?o("div",[t.goodsList.length?[o("ul",{staticClass:"goods-list"},t._l(t.goodsList,function(e,a){return o("li",{key:a,staticClass:"goods-item",attrs:{"data-tagname":"li"},on:{click:function(o){t.toProductDetail(e.goodsId)}}},[o("div",{staticClass:"goods-img"},[o("img",{directives:[{name:"adaptiveSrc",rawName:"v-adaptiveSrc:li",value:e.imagesUrl,expression:"item.imagesUrl",arg:"li"}]})]),t._v(" "),o("div",{staticClass:"goods-right"},[o("div",{staticClass:"goods-name"},[t._v(t._s(e.goodsName))]),t._v(" "),o("div",{staticClass:"goods-bottom"},[o("div",{staticClass:"price"},[o("span",[t._v(t._s(e.goodsScore))]),t._v("元气值\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),o("div",{staticClass:"stock"},[t._v("库存："+t._s(e.goodsStock))]),t._v(" "),o("div",{staticClass:"buy-btn"},[t._v("兑换")])])])])})),t._v(" "),o("loading-tip",{attrs:{loadingTip:t.loadingTip,isShow:t.goodsList.length>=t.pageNum,hasNext:t.hasNext}})]:[o("div",{staticClass:"no-record-wrapper"},[o("no-record",{attrs:{iconType:"noProduct",text:"商品上架中..."}})],1)]],2):t._e()])],1),t._v(" "),o("transition",{attrs:{name:"fade"}},[t.isLoadCompleted?t._e():o("loading-page")],1)],1)])},staticRenderFns:[]};var y=o("VU/8")(f,C,!1,function(t){o("5nL+")},"data-v-4ccb64ce",null).exports,L=o("CyOZ"),_={components:{NavHeader:i.a,NavFooter:s.a,MenuWrapper:p,CategoryList:y,LoadingPage:h.a},data:function(){return{isLoadCompleted:!0,isLoadPageCompleted:!0,errorTip:"",isConfirm:!0,showModel:!1,okType:""}},mounted:function(){var t=this;this.$nextTick(function(){$("body").show(),Object(L.a)(t,t.getHeaders,"-1"),r.a.commonFunc(t)})},methods:{receiptCategoryFunc:function(t,e){this.isLoadCompleted=!1,this.$refs.categoryList.sendCategoryIdToCategoryList(t,e)},updateLoadCompleted:function(t){this.isLoadCompleted=t},updatePageLoadCompleted:function(t){this.isLoadPageCompleted=t},showError:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.showModel=!0,o?(this.isConfirm=o,this.okType=e):(this.isConfirm=!1,this.okType=""),this.errorTip=t}}},T={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("nav-header",[o("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("商品分类")])]),t._v(" "),o("div",{staticClass:"category-wrapper"},[o("div",{staticClass:"menu-container"},[o("menu-wrapper",{on:{sendCategoryIdEvent:t.receiptCategoryFunc,errorEvent:t.showError}})],1),t._v(" "),o("div",{staticClass:"goods-container"},[o("category-list",{ref:"categoryList",attrs:{isLoadCompleted:t.isLoadCompleted,isLoadPageCompleted:t.isLoadPageCompleted},on:{updateLoadCompletedEvent:t.updateLoadCompleted,updatePageLoadCompleteEvent:t.updatePageLoadCompleted,errorEvent:t.showError}})],1),t._v(" "),o("transition",{attrs:{name:"fade"}},[t.isLoadPageCompleted?t._e():o("loading-page",{attrs:{page:"noTop"}})],1)],1),t._v(" "),o("nav-footer")],1)},staticRenderFns:[]};var P=o("VU/8")(_,T,!1,function(t){o("8XJ4")},"data-v-01c26393",null);e.default=P.exports},ZZR5:function(t,e){}});